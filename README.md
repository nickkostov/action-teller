# üßæ action-teller

`action-teller` is a CLI tool that generates Markdown documentation from `action.yml` / `action.yaml` files used to define GitHub Actions. It scans a directory (or a single file), parses each Action‚Äôs metadata, and emits clean docs covering inputs, outputs, permissions, branding, run steps (composite, Node.js, Docker), env vars, and defaults. Optionally, it can add a short AI-written summary via a local Ollama model.

## ‚ú® Features

- Scans directories for `action.yml` / `action.yaml`
- Renders:
  - Branding
  - Inputs and outputs
  - Runs (composite, node, docker)
  - Permissions
  - Env
  - Defaults
- Output modes:
  - One file per action + `INDEX.md`
  - Single `README.md` containing all actions
- Confluence-friendly tables (`--confluence`)
- Optional AI summaries with Ollama (`--llm-summary`, `--llm-model`)

## üì¶ Installation

Clone and install (editable mode recommended for development):

    git clone https://github.com/your-org/action-teller.git
    cd action-teller
    pip install -e .

Verify:

    action-teller --help

## üöÄ Usage

Generate docs into a directory:

    action-teller ./path/to/actions --out ./docs

Create a single combined README:

    action-teller ./path/to/actions --out ./docs --single

Emit Confluence-friendly tables:

    action-teller ./path/to/actions --out ./docs --confluence

Add an AI-generated summary (requires Ollama running and a pulled model, e.g. `mistral`):

    ollama pull mistral
    action-teller ./path/to/actions --out ./docs --llm-summary --llm-model mistral

## üß© Output

- Multi-file mode:
  - `INDEX.md` with links to each generated file
  - One `<action-name>.md` per discovered Action
- Single-file mode:
  - `README.md` containing a section for each discovered Action
- Each Action section includes:
  - Title and description (from the Action)
  - Optional AI summary (if enabled)
  - Branding, Inputs, Outputs, Runs, Permissions, Env, Defaults
  - A footer noting generation by `action-teller`

## üóÇÔ∏è Project Structure

    src/action_teller/
      cli.py                     # CLI entrypoint (click)
      __init__.py                # version metadata
      command_arguments/         # modular click arguments/options
        path.py                  # positional PATH
        out.py                   # --out / -o
        single.py                # --single
        confluence.py            # --confluence
        llm_summary.py           # --llm-summary, --llm-model
      renderers/                 # section renderers
        tables.py                # shared table helpers
        inputs.py
        outputs.py
        runs.py
        permissions.py
        env.py
        defaults.py
        branding.py
        __init__.py
      utils/
        file_finder.py           # find_action_files()
        yaml_loader.py           # parse_action_yaml()
        ollama.py                # ollama_summarize()

## üîß Options

- `PATH` (positional): Directory to scan or a single `action.yml` / `action.yaml` file
- `--out`, `-o`: Output directory for Markdown files (required)
- `--single`: Write a single `README.md` instead of one file per action
- `--confluence`: Use simplified tables for Confluence
- `--llm-summary`: Add a short summary generated by an Ollama model
- `--llm-model TEXT`: Ollama model to use (default: `mistral`)
- `--help`: Show usage
- `--version`: Show version

## ü§ñ Ollama Summaries

To enable summaries:
1. Install and run Ollama.
2. Pull a model (e.g., `mistral` or `llama3`).
3. Run `action-teller` with `--llm-summary` and optionally `--llm-model`.

Notes:
- Summaries are optional and non-fatal; if Ollama is unavailable, the tool will continue and annotate the error in place of the summary.
- Keep summaries concise for readable docs.

## üß™ Example

Given an `action.yml` with inputs, outputs, and composite steps, `action-teller` produces a markdown file with:
- A heading using the Action‚Äôs `name`
- The Action‚Äôs `description`
- An optional AI summary blockquote (if enabled)
- Tables for Inputs/Outputs/Permissions/Env
- A rendered `Runs` section (composite steps with run blocks, or Node/Docker metadata)
- A footer: ‚ÄúGenerated by action-teller‚Äù

## üêõ Troubleshooting

- `ModuleNotFoundError: No module named 'action_teller'`
  - Ensure the package folder is `src/action_teller/` and contains `__init__.py`
  - Reinstall after refactors: `pip uninstall action-teller -y && pip install -e .`

- `ImportError` for renderer modules
  - Check `src/action_teller/renderers/__init__.py` exports modules
  - Or import modules directly in `cli.py`

- Ollama errors
  - Confirm `ollama serve` is running and the model exists (`ollama pull mistral`)

## ‚öñÔ∏è License

MIT
